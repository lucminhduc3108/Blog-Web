<%- include ("partials/header.ejs") %>
<div class="blog-container">
  <h1>My Blog</h1>
  
  <% if (locals.blogs && Array.isArray(locals.blogs) && locals.blogs.length > 0) { %>
    <!-- Display all blogs from array -->
    <div class="blog-grid">
      <% locals.blogs.forEach((blog, index) => { %>
        <div class="blog-card">
          <div class="blog-content">
            <%= blog.content %>
          </div>
          <div class="blog-author">
            By <%= blog.title %>
            <% if (blog.date) { %>
              <span class="blog-date">â€¢ <%= blog.date %></span>
            <% } %>
          </div>
          <div class="blog-actions">
            <a href="/edit/<%= blog.id %>" class="action-btn edit-btn">Edit</a>
            <form action="/delete/<%= blog.id %>" method="POST" style="display: inline;">
              <button type="submit" class="action-btn delete-btn" onclick="return confirm('Are you sure you want to delete this post?')">Delete</button>
            </form>
          </div>
        </div>
      <% }); %>
    </div>
  <% } else if (locals.content && locals.title) { %>
    <!-- Display single blog (fallback) -->
    <div class="blog-card">
      <div class="blog-content">
        <%= locals.content %>
      </div>
      <div class="blog-author">
        By <%= locals.title %>
      </div>
    </div>
  <% } else { %>
    <div class="no-blog">
      <p>No blogs available.</p>
    </div>
  <% } %>
</div>

<%- include ("partials/footer.ejs") %>